{"ast":null,"code":"var _jsxFileName = \"C:\\\\saurabh pratical problem\\\\Contact-manager-project\\\\Contacts-Manager\\\\Client\\\\src\\\\components\\\\ImportContacts\\\\ImportContactsBox.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from \"react\";\nimport \"./ImportContactsBox.css\";\nimport { parse } from \"papaparse\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ImportContactsBox(_ref) {\n  _s();\n\n  let {\n    setOpenModal,\n    setuserCookie,\n    userCookie,\n    notify\n  } = _ref;\n  const modalRef = useRef();\n\n  const closeModal = e => {\n    if (modalRef.current === e.target) {\n      setOpenModal(false);\n    }\n  };\n\n  let csvjson = [];\n\n  const draganddrop = e => {\n    e.preventDefault();\n    const reader = new FileReader();\n\n    reader.onload = result => {\n      // console.log(reader.result);\n      let csvString = \"name,designation,company,industry,email,phoneNo,country\\n\" + reader.result.split('\\n').slice(1).join('\\n'); // console.log(csvString);\n\n      const out = parse(csvString.slice(0, -1), {\n        header: true\n      }).data;\n      csvjson = out;\n      console.log(csvjson);\n      fetch(\"https://contactsmanager-server.herokuapp.com/user/addcontacts\", {\n        // Adding method type\n        method: \"POST\",\n        // Adding headers to the request\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\",\n          \"authorization\": userCookie.token //\"eyJhbGciOiJIUzI1NiJ9.ZGluZXNoYm9yc2VAZ21haWwuY29t.GcNFxh1NL1qMb17t48u33Jo9am194niNyFonB8r1G9Q\"\n\n        },\n        body: JSON.stringify({\n          data: csvjson\n        })\n      }) // Converting to JSON\n      .then(response => {\n        return response.json();\n      }).then(res => {\n        // console.log(res);\n        if (res.status === \"success\") {\n          modalRef.current.click();\n          notify(\"CSV File is Uploaded\", \"Import Complete\");\n        } else {\n          console.log(res.message);\n          window.alert(res.message);\n        }\n      }).catch(err => {\n        console.log(err);\n      }); //\n    };\n\n    reader.readAsText(e.dataTransfer.files[0]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: closeModal,\n    ref: modalRef,\n    className: \"modalBackground\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      onDrop: draganddrop,\n      className: \"import-contact-box-file-input\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modalContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"import-contact-box-img\",\n        src: \"GroupimportIcon.svg\",\n        alt: \"GroupimportIcon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"import-contact-box-import-file-name\",\n        children: \"Import File\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"import-contact-box-msg\",\n        children: \"Drag and Drop CSV File to Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: () => {\n          setOpenModal(false);\n        },\n        id: \"cancelBtn\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ImportContactsBox, \"zNVem5B1U/BPM1VF05fbpVyTiCs=\");\n\n_c = ImportContactsBox;\nexport default ImportContactsBox;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImportContactsBox\");","map":{"version":3,"names":["React","useRef","parse","ImportContactsBox","setOpenModal","setuserCookie","userCookie","notify","modalRef","closeModal","e","current","target","csvjson","draganddrop","preventDefault","reader","FileReader","onload","result","csvString","split","slice","join","out","header","data","console","log","fetch","method","headers","token","body","JSON","stringify","then","response","json","res","status","click","message","window","alert","catch","err","readAsText","dataTransfer","files"],"sources":["C:/saurabh pratical problem/Contact-manager-project/Contacts-Manager/Client/src/components/ImportContacts/ImportContactsBox.js"],"sourcesContent":["import React, { useRef } from \"react\";\r\nimport \"./ImportContactsBox.css\";\r\nimport { parse } from \"papaparse\";\r\n\r\nfunction ImportContactsBox({ setOpenModal, setuserCookie, userCookie, notify }) {\r\n\r\n  const modalRef = useRef();\r\n\r\n  const closeModal = e => {\r\n    if (modalRef.current === e.target) {\r\n      setOpenModal(false);\r\n    }\r\n  };\r\n\r\n  let csvjson = [];\r\n  const draganddrop = (e) => {\r\n\r\n    e.preventDefault();\r\n    const reader = new FileReader();\r\n    reader.onload = (result) => {\r\n      // console.log(reader.result);\r\n      let csvString =\"name,designation,company,industry,email,phoneNo,country\\n\"+(reader.result.split('\\n').slice(1)).join('\\n')\r\n      // console.log(csvString);\r\n      const out = parse(csvString.slice(0, -1), {\r\n        header: true,\r\n      }).data;\r\n\r\n      csvjson = out;\r\n      console.log(csvjson);\r\n      fetch(\"https://contactsmanager-server.herokuapp.com/user/addcontacts\", {\r\n        // Adding method type\r\n        method: \"POST\",\r\n        // Adding headers to the request\r\n        headers: {\r\n          \"Content-type\": \"application/json; charset=UTF-8\",\r\n          \"authorization\": userCookie.token//\"eyJhbGciOiJIUzI1NiJ9.ZGluZXNoYm9yc2VAZ21haWwuY29t.GcNFxh1NL1qMb17t48u33Jo9am194niNyFonB8r1G9Q\"\r\n        },\r\n        body: JSON.stringify({\r\n          data: csvjson\r\n        })\r\n      })\r\n        // Converting to JSON\r\n        .then(response => {\r\n          return response.json()\r\n        }).then((res)=>{\r\n          // console.log(res);\r\n          if(res.status===\"success\"){\r\n            modalRef.current.click();\r\n            notify(\"CSV File is Uploaded\", \"Import Complete\");\r\n          }\r\n          else{\r\n            console.log(res.message);\r\n            window.alert(res.message);\r\n          }\r\n        }).catch(err=>{console.log(err)})\r\n      //\r\n    };\r\n    reader.readAsText(e.dataTransfer.files[0]);\r\n  };\r\n  return (\r\n    <div onClick={closeModal} ref={modalRef} className=\"modalBackground\">\r\n      <input type=\"file\" onDrop={draganddrop} className=\"import-contact-box-file-input\" />\r\n      <div className=\"modalContainer\" >\r\n        <img className=\"import-contact-box-img\" src=\"GroupimportIcon.svg\" alt=\"GroupimportIcon\" />\r\n        <div className=\"import-contact-box-import-file-name\">Import File</div>\r\n        <div className=\"import-contact-box-msg\">Drag and Drop CSV File to Upload</div>\r\n        <div onClick={() => { setOpenModal(false); }} id=\"cancelBtn\">Cancel</div>\r\n      </div>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default ImportContactsBox;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}